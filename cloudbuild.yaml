steps:
  # Decrypt Env
  - name: gcr.io/cloud-builders/gcloud
    args:
      - kms
      - decrypt
      - --ciphertext-file=.env.enc
      - --plaintext-file=.env
      - --location=global
      - --keyring=ambrite
      - --key=typescript-template
  # Install
  - name: "gcr.io/cloud-builders/npm"
    args: ["i"]
  # Lint
  - name: "gcr.io/cloud-builders/npm"
    args: ["run", "lint"]
  # Test
  - name: "gcr.io/cloud-builders/npm"
    args: ["run", "test"]
  # Build
  - name: "gcr.io/cloud-builders/npm"
    args: ["run", "build"]
